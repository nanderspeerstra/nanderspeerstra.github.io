<style>
    .image-gallery {
        overflow: auto;
        margin-left: -1%!important;
    }
    .image-gallery li {
        float: left;
        display: block;
        margin: 0 0 1% 1%;
        width: 19%;
    }
    .image-gallery li a {
        text-align: center;
        text-decoration: none!important;
        color: #777;
    }
    .image-gallery li a span {
        display: block;
        text-overflow: ellipsis;
        overflow: hidden;
        white-space: nowrap;
        padding: 3px 0;
    }
    .image-gallery li a img {
        width: 100%;
        display: block;
    }
</style>

{% assign genres = "nature,architecture" | split: "," %}

{% for genre in genres %}
  <h2>{{ genre | capitalize }}</h2>
  <ul class="image-gallery">
    {% for file in site.static_files %}
      {% if file.path contains genre and file.extname == '.jpg' %}
        {% assign filenameparts = file.path | split: "/" %}
        {% assign filename = filenameparts | last %}
        <li>
          <a href="{{ file.path | relative_url }}" title="{{ filename }}">
            <img src="{{ site.url }}{{ file.path | relative_url }}" alt="{{ filename }}" title="{{ filename }}" />
            <span>{{ filename }}</span>
          </a>
        </li>
      {% endif %}
    {% endfor %}
  </ul>
{% endfor %}
